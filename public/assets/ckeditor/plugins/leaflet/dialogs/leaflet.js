CKEDITOR.dialog.add("leaflet",function(h){var c="",b=h.lang.leaflet,d=h.lang.common;return{title:b.dialogTitle,minWidth:320,minHeight:125,contents:[{id:"location_tab",label:b.locationTabLabel,elements:[{id:"map_geocode",className:"geocode",type:"text",label:b.googleSearchFieldLabel,style:"margin-top: -7px;",setup:function(a){this.setValue("")},onShow:function(a){var p=jQuery(".geocode input")[0];jQuery(".geocode input").attr("placeholder",b.googleSearchFieldHint);a=h.config;var c="AIzaSyA9ySM6msnGm0qQB1L1cLTMBdKEUKPySmQ";
"undefined"!=typeof a.leaflet_maps_google_api_key&&""!=a.leaflet_maps_google_api_key&&(c=a.leaflet_maps_google_api_key);"undefined"==typeof google&&CKEDITOR.scriptLoader.load("//maps.googleapis.com/maps/api/js?libraries\x3dplaces\x26callback\x3ddummy\x26key\x3d"+c,function(){new google.maps.places.Autocomplete(p)});a=jQuery('\x3cstyle type\x3d"text/css" /\x3e');a.html(".pac-container { z-index: 100000 !important;} input.minimap { margin-top: 18px !important; }");jQuery("head").append(a)}},{type:"html",
id:"map_label",className:"label",style:"margin-bottom: -10px;",html:"\x3cp\x3e"+b.manualCoordinatesFieldLabel+"\x3c/p\x3e"},{type:"hbox",widths:["50%","50%"],children:[{id:"map_latitude",className:"latitude",type:"text",label:b.manualLatitudeFieldLabel,setup:function(a){""!==a.element.data("lat")&&(""===c&&(c=a.element.getChild(0).$.contentDocument.getElementById("map_container")),a=c.getAttribute("data-lat"),this.setValue(a))}},{id:"map_longitude",className:"longitude",type:"text",label:b.manualLongitudeFieldLabel,
setup:function(a){""!==a.element.data("lat")&&(""===c&&(c=a.element.getChild(0).$.contentDocument.getElementById("map_container")),a=c.getAttribute("data-lon"),this.setValue(a))}}]},{id:"popup_text",className:"popup-text",type:"text",label:b.popupTextFieldLabel,style:"margin-bottom: 8px;",setup:function(a){""!=a.element.data("popup-text")?this.setValue(a.element.data("popup-text")):jQuery(".popup-text input").attr("placeholder",b.popupTextFieldHint)}}]},{id:"options_tab",label:b.optionsTabLabel,elements:[{type:"hbox",
style:"margin-top: -7px;",widths:["38%","38%","24%"],children:[{id:"width",className:"map_width",type:"text",label:b.mapWidthFieldLabel,setup:function(a){jQuery(".map_width input").attr("placeholder","400");""!=a.element.data("width")&&this.setValue(a.element.data("width"))}},{id:"height",className:"map_height",type:"text",label:b.mapHeightFieldLabel,setup:function(a){jQuery(".map_height input").attr("placeholder","400");""!=a.element.data("height")&&this.setValue(a.element.data("height"))}},{id:"map_zoom",
className:"zoom",type:"select",label:b.mapZoomLevelFieldLabel,width:"70px",items:[["1"],["2"],["3"],["4"],["5"],["6"],["7"],["8"],["9"],["10"],["11"],["12"],["13"],["14"],["15"],["16"],["17"],["18"],["19"],["20"]],setup:function(a){""!=a.element.data("zoom")?(""===c&&(c=a.element.getChild(0).$.contentDocument.getElementById("map_container")),a=c.getAttribute("data-zoom"),this.setValue(a)):this.setValue("10")}}]},{type:"hbox",widths:["50%","50%"],children:[{type:"select",id:"map_tile",className:"tile",
label:b.baseMapTileLabel,items:[["OpenStreetMap.Mapnik"],["OpenStreetMap.DE"],["OpenStreetMap.HOT"],["Esri.DeLorme"],["Esri.NatGeoWorldMap"],["Esri.WorldPhysical"],["Esri.WorldTopoMap"],["Thunderforest.OpenCycleMap"],["Thunderforest.Landscape"],["Stamen.Watercolor"]],setup:function(a){var b=["MapQuestOpen.Aerial","MapQuestOpen.OSM"];a=a.element.data("tile");""!=a&&-1==b.indexOf(a)?this.setValue(a):this.setValue("OpenStreetMap.Mapnik")},commit:function(a){a.element.setHtml("");var b=jQuery(".geocode input").val(),
d,l;if(""!=b){var e="//maps.googleapis.com/maps/api/geocode/json?address\x3d"+b+"\x26sensor\x3dfalse";jQuery.ajaxSetup({async:!1});jQuery.getJSON(e,function(a){"ZERO_RESULTS"!=a.status?(d=a.results[0].geometry.location.lat,l=a.results[0].geometry.location.lng):alert("The Place could not be Geocoded properly. Kindly choose another one.")})}var e=jQuery(".latitude input").val(),k=jQuery(".longitude input").val(),f=a.element.data("lat"),m=a.element.data("lon");""!=e&&""!=k&&(e!=f&&k!=m||""==b)&&(d=e,
l=k);var b=jQuery(".map_width input").val()||"400",e=jQuery(".map_height input").val()||"400",f=jQuery("select.zoom").val(),m=jQuery(".popup-text input").val(),h=jQuery("select.tile").val(),g=jQuery("select.alignment").val(),n=jQuery(".minimap input:checked").val();void 0==n&&(n="off");k=(new Date).getTime();a.element.setAttribute("id","leaflet_div-"+k);a.element.data("lat",d);a.element.data("lon",l);a.element.data("width",b);a.element.data("height",e);a.element.data("zoom",f);a.element.data("popup-text",
m);a.element.data("tile",h);a.element.data("minimap",n);a.element.data("alignment",g);a.element.removeClass("align-left");a.element.removeClass("align-right");a.element.removeClass("align-center");a.element.addClass("align-"+g);g=jQuery(".responsive input:checked").val();void 0==g?(g="off",a.element.removeClass("responsive-map")):a.element.addClass("responsive-map");a.element.data("responsive",g);mapParserPathFull=mapParserPath+"?lat\x3d"+d+"\x26lon\x3d"+l+"\x26width\x3d"+b+"\x26height\x3d"+e+"\x26zoom\x3d"+
f+"\x26text\x3d"+m+"\x26tile\x3d"+h+"\x26minimap\x3d"+n+"\x26responsive\x3d"+g;f=new CKEDITOR.dom.element("iframe");f.setAttributes({scrolling:"no",id:"leaflet_iframe-"+k,"class":"leaflet_iframe",width:b+"px",height:e+"px",frameborder:0,allowTransparency:!0,src:mapParserPathFull,"data-cke-saved-src":mapParserPathFull});"on"==g&&f.setAttribute("class","leaflet_iframe responsive-map-iframe");a.element.append(f);c=""}},{type:"checkbox",id:"map_mini",className:"minimap",label:b.minimapCheckboxLabel,setup:function(a){""!=
a.element.data("minimap")&&"on"!=a.element.data("minimap")?this.setValue(""):this.setValue("true")}}]},{type:"hbox",widths:["20%","80%"],children:[{id:"map_alignment",className:"alignment",type:"select",label:d.align,items:[[d.alignLeft,"left"],[d.alignRight,"right"],[d.alignCenter,"center"]],style:"margin-bottom: 4px;",setup:function(a){""!=a.element.data("alignment")?this.setValue(a.element.data("alignment")):this.setValue("left")}},{type:"checkbox",id:"map_responsive",className:"responsive",label:b.responsiveMapCheckboxLabel,
style:"margin-top: 18px;",setup:function(a){""!=a.element.data("responsive")?"on"==a.element.data("responsive")?this.setValue("true"):this.setValue(""):this.setValue("")}}]}]}]}});