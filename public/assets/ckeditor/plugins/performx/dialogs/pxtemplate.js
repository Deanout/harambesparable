(function(){var d;(function(a){a.ajax({async:!1,dataType:"json",url:CKEDITOR.plugins.getPath("performx")+"resources/templates.json",success:function(b){d=b.templates},error:function(b,c,a){console.log("Request Failed: "+(c+", "+a))}})})(jQuery);d.buildSelectList=function(){var a=[];a.push(["Choose a template...",""]);for(var b,c=0;c<this.length;c++)b=[this[c].displayName,this[c].templateValue],a.push(b);return a};d.getTemplateAttribute=function(a,b){for(var c=0;c<this.length;c++)if(this[c].templateValue==
a)return this[c][b];return""};CKEDITOR.dialog.add("pxTemplateDialog",function(a){return{title:"PerformX OpenAccess - Editor Content Templates",minWidth:530,minHeight:480,contents:[{id:"main",elements:[{type:"html",html:"\x3cp\x3eSelect a editor content template to see its preview.\x3c/p\x3e"},{type:"hbox",width:[null,null],height:450,children:[{type:"vbox",style:"margin-right: 20px;",children:[{id:"templateName",type:"select",label:"Template:",items:d.buildSelectList(),onChange:function(){var b,c,
a,e;b=this.getValue();c=CKEDITOR.plugins.getPath("performx");a=d.getTemplateAttribute(b,"previewImage");e=d.getTemplateAttribute(b,"displayName");b=d.getTemplateAttribute(b,"description");""!=a?(a=c+"images/"+a,jQuery("#template-preview").html('\x3cp style\x3d"margin-bottom:10px;white-space:normal;"\x3e\x3cspan style\x3d"font-weight:bold;color:#840004;"\x3e'+e+":\x3c/span\x3e\x3cbr/\x3e"+b+'\x3c/p\x3e\x3cimg src\x3d"'+a+'" /\x3e')):jQuery("#template-preview").html("\x3cp\x3e\x3c/p\x3e")}},{id:"isOverwrite",
type:"checkbox",label:"Overwrite current contents in the editor"}]},{type:"vbox",children:[{id:"preview",type:"html",html:'\x3cdiv id\x3d"template-preview"\x3e\x3c/div\x3e'}]}]},{type:"html",html:'\x3cp\x3e\x3ca style\x3d"color:#840004;" href\x3d"javascript:void(0);" id\x3d"pxTplHelpLink"\x3eHelp\x3c/a\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3ca style\x3d"color:#840004;" href\x3d"javascript:void(0);" id\x3d"pxTplAboutLink"\x3eAbout\x3c/a\x3e\x3c/p\x3e',onLoad:function(){document.getElementById("pxTplHelpLink").onclick=
function(){window.pxHelpMode=1;a.openDialog("helpDialog")};document.getElementById("pxTplAboutLink").onclick=function(){a.openDialog("aboutDialog")}}}]}],onShow:function(){jQuery("#template-preview").html("\x3cp\x3e\x3c/p\x3e")},onOk:function(){var b=this.getValueOf("main","templateName"),c=this.getValueOf("main","isOverwrite"),b=d.getTemplateAttribute(b,"templateHtml");""!=b&&(c?confirm("Are you sure to overwrite the editor contents? All your current contents will be lost.")?a.setData(b):a.insertHtml(b):
a.insertHtml(b))}}})})();